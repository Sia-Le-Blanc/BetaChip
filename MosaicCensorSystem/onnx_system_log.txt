=======================================================================
🚀 ONNX 가이드 기반 화면 검열 시스템 시작 - 2025-07-09 23:55:41
📄 로그 파일: C:\Users\Sia\OneDrive\바탕 화면\MosaicCensorSystem\MosaicCensorSystem\onnx_system_log.txt
🛡️ 크래시 완전 방지 모드 활성화
=======================================================================
📍 현재 작업 디렉토리: C:\Users\Sia\OneDrive\바탕 화면\MosaicCensorSystem\MosaicCensorSystem
📍 실행 파일 위치: C:\Users\Sia\OneDrive\바탕 화면\MosaicCensorSystem\MosaicCensorSystem\bin\x64\Release\net6.0-windows\
🔍 모델 파일 후보: Resources/best.onnx (11.0 MB)
✅ 유효한 모델 파일 발견: Resources/best.onnx
📂 ONNX 모델 경로: Resources/best.onnx
📂 파일 존재 여부: True
📊 모델 파일 정보:
  크기: 11.0 MB
  생성일: 2025-07-08 20:06:42
  수정일: 2025-07-08 20:06:42
✅ 모델 파일 크기가 적절합니다
🛡️ ONNX 최적화 모드로 프로그램 시작
✅ 시스템 우선순위 최적화 완료
✅ 메모리 관리 최적화 완료
🧪 ONNX Runtime 환경 테스트 시작
📊 사용 가능한 실행 제공자: 1개
  🔧 CPUExecutionProvider
🔥 CPU 전용 모드로 동작
🔍 ONNX 모델 로딩 테스트 중...
📊 모델 입력: images -> 1x3x640x640
📊 모델 출력: output0 -> 1x18x8400
✅ 모델 구조가 가이드 기준에 부합합니다!
✅ 모델 로딩 테스트 성공
✅ ONNX Runtime 환경 테스트 완료

🔍 상세 ONNX 진단 실행...
🔍 ONNX Runtime 환경 진단 시작
===================================================
📦 ONNX Runtime 버전 정보:
  Assembly 버전: 0.0.0.0
  파일 버전: 0.0.0.0
  제품 버전: 0.0.0.0
  라이브러리 위치: C:\Users\Sia\OneDrive\바탕 화면\MosaicCensorSystem\MosaicCensorSystem\bin\x64\Release\net6.0-windows\Microsoft.ML.OnnxRuntime.dll

🔧 사용 가능한 실행 제공자:
  ✅ CPUExecutionProvider
    🔥 CPU 지원 정보:
    프로세서 코어: 8
    64비트 프로세스: True
    사용 가능한 메모리: 0 MB

📚 네이티브 라이브러리 확인:
  ❌ onnxruntime.dll 없음
  ❌ onnxruntime_providers_shared.dll 없음
  ❌ onnxruntime_providers_cuda.dll 없음
  ❌ onnxruntime_providers_tensorrt.dll 없음

  현재 디렉토리의 관련 DLL:

🤖 모델 호환성 확인:
  📁 모델 경로: Resources/best.onnx
  📊 파일 크기: 11.0 MB
  ✅ 모델 로딩 성공 (안전 모드)
  📥 입력: 1개
    - images: 1x3x640x640
  📤 출력: 1개
    - output0: 1x18x8400

💾 메모리 상태:
  전체 메모리: 0 MB
  Gen 0 수집: 2
  Gen 1 수집: 2
  Gen 2 수집: 2
  작업 세트: 41 MB
  개인 메모리: 22 MB
  가상 메모리: 2102005 MB
  GC 후 메모리: 0 MB
===================================================
✅ 진단 완료

🧪 간단한 추론 테스트:
  🔄 추론 실행 중...
  ✅ 추론 성공: 출력 크기 151200
✅ 추론 테스트 성공 - 정상 모드로 진행
✅ Windows Forms 초기화 완료
🚀 MosaicApp 인스턴스 생성 중...
🔧 점진적 기능 복구 모드로 컴포넌트 초기화 중...
1. ScreenCapturer 초기화 중...
✅ 화면 해상도: 1366x768, 캡처 크기: 1366x768
✅ 캡처 스레드 시작됨
✅ ScreenCapturer 초기화 완료
2. 진단 도구 실행 중...
🔍 ONNX Runtime 환경 진단 시작
===================================================
📦 ONNX Runtime 버전 정보:
  Assembly 버전: 0.0.0.0
  파일 버전: 0.0.0.0
  제품 버전: 0.0.0.0
  라이브러리 위치: C:\Users\Sia\OneDrive\바탕 화면\MosaicCensorSystem\MosaicCensorSystem\bin\x64\Release\net6.0-windows\Microsoft.ML.OnnxRuntime.dll

🔧 사용 가능한 실행 제공자:
  ✅ CPUExecutionProvider
🔄 캡처 스레드 시작
    🔥 CPU 지원 정보:
    프로세서 코어: 8
    64비트 프로세스: True
    사용 가능한 메모리: 5 MB

📚 네이티브 라이브러리 확인:
  ❌ onnxruntime.dll 없음
  ❌ onnxruntime_providers_shared.dll 없음
  ❌ onnxruntime_providers_cuda.dll 없음
  ❌ onnxruntime_providers_tensorrt.dll 없음

  현재 디렉토리의 관련 DLL:

🤖 모델 호환성 확인:
  📁 모델 경로: Resources/best.onnx
  📊 파일 크기: 11.0 MB
  ✅ 모델 로딩 성공 (안전 모드)
  📥 입력: 1개
    - images: 1x3x640x640
  📤 출력: 1개
    - output0: 1x18x8400

💾 메모리 상태:
  전체 메모리: 5 MB
  Gen 0 수집: 4
  Gen 1 수집: 4
  Gen 2 수집: 4
  작업 세트: 59 MB
  개인 메모리: 34 MB
  가상 메모리: 2102034 MB
  GC 후 메모리: 0 MB
===================================================
✅ 진단 완료
3. 안전 프로세서 초기화 중...
🛡️ 안전 프로세서 초기화 시작
✅ 유효한 모델 발견: Resources/best.onnx (11.0 MB)
📁 모델 경로: Resources/best.onnx
🔍 1단계: 모델 파일 존재 확인
🔍 2단계: 기본 세션 생성 테스트
✅ 기본 세션 생성 성공
🔍 3단계: 간단한 추론 테스트
🧪 320x320 입력으로 추론 테스트
❌ 간단한 추론 실패: [ErrorCode:InvalidArgument] Got invalid dimensions for input: images for the following indices
 index: 2 Got: 320 Expected: 640
 index: 3 Got: 320 Expected: 640
 Please fix either the inputs or the model.
🔄 입력 크기를 160로 줄여서 재시도
🧪 160x160 입력으로 추론 테스트
❌ 간단한 추론 실패: [ErrorCode:InvalidArgument] Got invalid dimensions for input: images for the following indices
 index: 2 Got: 160 Expected: 640
 index: 3 Got: 160 Expected: 640
 Please fix either the inputs or the model.
❌ 간단한 추론 실패 - 모델 로드만 유지
✅ 안전 프로세서 초기화 완료
4. FullscreenOverlay 초기화 중...
🛡️ 화면 검열 시스템 초기화 완료
✅ FullscreenOverlay 초기화 완료
✅ 점진적 기능 복구 모드 MosaicApp 초기화 완료
✅ MosaicApp 인스턴스 생성 완료
🏃 Application.Run 시작...
[23:55:47] 🔄 기능 레벨 변경: 레벨 3
[23:55:47] 🔍 객체 감지: 활성화
[23:55:47] 📋 레벨 3: 객체 감지 추가 (검열 없음)
🔄 점진적 복구 모드 StartProgressive 시작
[23:55:50] 🎯 선택된 타겟들: 얼굴
[23:55:55] 🔍 신뢰도 변경: 0.7
[23:55:55] 🔍 신뢰도 변경: 0.7
[23:55:55] 🔍 신뢰도 변경: 0.8
[23:55:55] 🔍 신뢰도 변경: 0.8
💪 강도 변경: 23
[23:55:55] 💪 검열 강도 변경: 23
💪 강도 변경: 23
[23:55:55] 💪 검열 강도 변경: 23
[23:55:57] 🔄 기능 레벨 변경: 레벨 2
[23:55:57] 🔍 객체 감지: 비활성화
[23:55:57] 📋 레벨 2: 고성능 캡처 모드
[23:56:00] ⚡ 목표 FPS 변경: 20
[23:56:00] ⚡ 목표 FPS 변경: 25
[23:56:00] ⚡ 목표 FPS 변경: 30
[23:56:00] ⚡ 목표 FPS 변경: 35
[23:56:00] ⚡ 목표 FPS 변경: 40
[23:56:00] ⚡ 목표 FPS 변경: 45
[23:56:00] ⚡ 목표 FPS 변경: 50
[23:56:00] ⚡ 목표 FPS 변경: 55
[23:56:02] ⚡ 목표 FPS 변경: 56
[23:56:02] ⚡ 목표 FPS 변경: 57
[23:56:02] ⚡ 목표 FPS 변경: 58
[23:56:02] ⚡ 목표 FPS 변경: 59
[23:56:02] ⚡ 목표 FPS 변경: 60
🔄 점진적 복구 모드 StartProgressive 시작
[23:56:03] 🎯 선택된 타겟들: 얼굴
🛡️ 풀스크린 캡처 방지 + 클릭 투과 오버레이 표시 시작...
🔍 윈도우 핸들 획득: 395574
🛡️ 캡처 방지 설정 성공! (100% 피드백 루프 방지)
🔍 현재 Extended Style: 0x00010008
🔍 새로운 Extended Style: 0x000900A8
🖱️ 클릭 투과 설정 성공! (마우스 클릭이 바탕화면으로 전달됩니다)
✅ 최상단 설정 완료
✅ 클릭 투과 즉시 테스트 성공!
⚠️ Windows Hook 설치 실패
🎉 풀스크린이 캡처 방지 + 클릭 투과로 설정되었습니다!
✅ 풀스크린 캡처 방지 + 클릭 투과 오버레이 표시됨
💡 ESC 키를 누르면 종료됩니다
🔄 강화된 최상단 유지 루프 시작
🔄 풀스크린 디스플레이 루프 시작
💡 바탕화면을 자유롭게 클릭/드래그할 수 있습니다
[23:56:04] 🔄 점진적 복구 모드 시작! 레벨=2, FPS=60
[23:56:04] ⚙️ 설정: 감지=False, 검열=False, 타겟=얼굴
🔄 점진적 복구 모드 StartProgressive 완료!
[23:56:04] 🔄 점진적 복구 ProcessingLoop 시작
[23:56:04] 🔄 처리 루프 진입 - 목표 FPS: 60, 프레임 스킵: 1
📸 화면 캡처: 프레임 #500, 크기: (width:1366 height:768)
📸 화면 캡처: 프레임 #600, 크기: (width:1366 height:768)
📸 화면 캡처: 프레임 #700, 크기: (width:1366 height:768)
💪 강도 변경: 20
[23:56:17] 💪 검열 강도 변경: 20
💪 강도 변경: 20
[23:56:17] 💪 검열 강도 변경: 20
💪 강도 변경: 17
[23:56:17] 💪 검열 강도 변경: 17
💪 강도 변경: 17
[23:56:17] 💪 검열 강도 변경: 17
[23:56:17] 🛑 점진적 복구 모드 중지 중...
🛑 화면 검열 시스템 종료 중...
🛑 강화된 최상단 유지 루프 종료
🛑 풀스크린 디스플레이 루프 종료
✅ 화면 검열 시스템 종료됨
[23:56:17] 🛑 오버레이 창 닫힘 - 루프 종료
[23:56:17] 🧹 점진적 복구 ProcessingLoop 정리
[23:56:17] 🏁 점진적 복구 ProcessingLoop 완전 종료
[23:56:17] ✅ 점진적 복구 모드 중지됨
🧹 점진적 복구 모드 리소스 정리 중...
🛑 캡처 스레드 종료
✅ 캡처 스레드 중지됨
🧹 안전 프로세서 정리됨
✅ 점진적 복구 모드 리소스 정리 완료
🏁 Application.Run 정상 종료

🏁 ONNX 최적화 프로그램 종료 - 2025-07-09 23:56:19
🛡️ 모든 크래시가 성공적으로 방지되었습니다
📄 로그 파일들을 확인하세요: onnx_system_log.txt
